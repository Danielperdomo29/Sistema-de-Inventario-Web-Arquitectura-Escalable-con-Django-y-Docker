{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Sistema de Inventario{% endblock %} - Sistema de Inventario</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/forms.css' %}">
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
    <link rel="stylesheet" href="{% static 'css/swal.css' %}">
    <link rel="stylesheet" href="{% static 'css/chatbot.css' %}">
    <link rel="stylesheet" href="{% static 'css/theme-corporate-neutral.css' %}?v=6.0">
    <script src='https://cdn.jsdelivr.net/npm/sweetalert2@11'></script>
    
    {% block extra_css %}{% endblock %}
</head>
<body>
    <div class="navbar">
        <div class="navbar-content">
            <button class="hamburger-menu" id="hamburger-menu" aria-label="Toggle menu">
                <i class="fas fa-bars"></i>
            </button>
            <h1>Sistema de Inventario</h1>
            <div class="navbar-menu">
                <span>Hola, {{ request.user.username }}</span>
                <a href="/configuracion/" style="margin-right: 15px;"><i class="fas fa-user-cog"></i> Mi Perfil</a>
                <a href="{% url 'logout' %}">Cerrar Sesión</a>
            </div>
        </div>
    </div>

    <div class="layout">
        <div class="sidebar-overlay" id="sidebar-overlay"></div>
        <div class="sidebar" id="sidebar">

            <!-- Sección Inventario -->
            <div class="sidebar-section" data-section="inventario">
                <div class="sidebar-section-header">
                    <div class="section-title">
                        <i class="fas fa-boxes"></i>
                        <span>Inventario</span>
                    </div>
                    <button class="section-toggle" data-section="inventario" aria-label="Toggle Inventario">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
                <ul class="sidebar-menu" data-section="inventario">
                    <li><a href="/" data-tooltip="Dashboard"><i class="fas fa-home"></i> <span>Dashboard</span></a></li>
                    <li><a href="/productos/" data-tooltip="Productos"><i class="fas fa-box"></i> <span>Productos</span></a></li>
                    <li><a href="/categorias/" data-tooltip="Categorías"><i class="fas fa-tags"></i> <span>Categorías</span></a></li>
                    <li><a href="/almacenes/" data-tooltip="Almacenes"><i class="fas fa-warehouse"></i> <span>Almacenes</span></a></li>
                    <li><a href="/movimientos-inventario/" data-tooltip="Movimientos Inventario"><i class="fas fa-exchange-alt"></i> <span>Movimientos Inventario</span></a></li>
                    <li><a href="/proveedores/" data-tooltip="Proveedores"><i class="fas fa-truck"></i> <span>Proveedores</span></a></li>
                    <li><a href="/reportes/" data-tooltip="Reportes"><i class="fas fa-chart-bar"></i> <span>Reportes</span></a></li>
                </ul>
            </div>

            <!-- Sección Facturación -->
            <div class="sidebar-section" data-section="facturacion">
                <div class="sidebar-section-header">
                    <div class="section-title">
                        <i class="fas fa-file-invoice-dollar"></i>
                        <span>Facturación</span>
                    </div>
                    <button class="section-toggle" data-section="facturacion" aria-label="Toggle Facturación">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
                <ul class="sidebar-menu" data-section="facturacion">
                    <li><a href="/clientes/" data-tooltip="Clientes"><i class="fas fa-users"></i> <span>Clientes</span></a></li>
                    <li><a href="/ventas/" data-tooltip="Ventas"><i class="fas fa-shopping-cart"></i> <span>Ventas</span></a></li>
                    <li><a href="/detalle-ventas/" data-tooltip="Detalle Ventas"><i class="fas fa-receipt"></i> <span>Detalle Ventas</span></a></li>
                    <li><a href="/compras/" data-tooltip="Compras"><i class="fas fa-shopping-bag"></i> <span>Compras</span></a></li>
                    <li><a href="/detalle-compras/" data-tooltip="Detalle Compras"><i class="fas fa-file-invoice"></i> <span>Detalle Compras</span></a></li>
                </ul>
            </div>

            <!-- Sección Fiscal -->
            <div class="sidebar-section" data-section="fiscal">
                <div class="sidebar-section-header">
                    <div class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        <span>Obligaciones Fiscales</span>
                    </div>
                    <button class="section-toggle" data-section="fiscal" aria-label="Toggle Fiscal">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
                <ul class="sidebar-menu" data-section="fiscal">
                    <li><a href="/fiscal/reportes/declaracion-iva/" data-tooltip="Declaración IVA (300)"><i class="fas fa-file-invoice-dollar"></i> <span>Declaración IVA (300)</span></a></li>
                    <li><a href="/fiscal/reportes/declaracion-retefuente/" data-tooltip="Retención Fte (350)"><i class="fas fa-hand-holding-usd"></i> <span>Retención Fte (350)</span></a></li>
                    <li><a href="/fiscal/reportes/libro-diario/" data-tooltip="Libro Diario"><i class="fas fa-book"></i> <span>Libro Diario</span></a></li>
                    <li><a href="/fiscal/reportes/balance-prueba/" data-tooltip="Balance de Prueba"><i class="fas fa-balance-scale"></i> <span>Balance de Prueba</span></a></li>
                    <li><a href="{% url 'configuracion_fiscal' %}" data-tooltip="Configuración DIAN"><i class="fas fa-cogs"></i> <span>Configuración DIAN</span></a></li>
                </ul>
            </div>

            <!-- Sección Sistema -->
            <div class="sidebar-section" data-section="sistema">
                <div class="sidebar-section-header">
                    <div class="section-title">
                        <i class="fas fa-cog"></i>
                        <span>Sistema</span>
                    </div>
                    <button class="section-toggle" data-section="sistema" aria-label="Toggle Sistema">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
                <ul class="sidebar-menu" data-section="sistema">
                    <li><a href="/roles/" data-tooltip="Roles"><i class="fas fa-user-tag"></i> <span>Roles</span></a></li>
                    <li><a href="/chatbot/" data-tooltip="Chatbot IA"><i class="fas fa-robot"></i> <span>Chatbot IA</span></a></li>
                    <li><a href="/configuracion/" data-tooltip="Configuración"><i class="fas fa-cog"></i> <span>Configuración</span></a></li>
                    <li><a href="/documentacion/" data-tooltip="Documentación"><i class="fas fa-book"></i> <span>Documentación</span></a></li>
                </ul>
            </div>
        </div>

        <div class="main-content">
            {% block content %}{% endblock %}
        </div>
    </div>

    <script src="{% static 'js/main.js' %}"></script>
    <script src="{% static 'js/sidebar.js' %}"></script>
    <script src="{% static 'js/sidebar-sections.js' %}"></script>
    <script>
        window.userActive = {{ request.user.is_active|yesno:"true,false" }};
    </script>
    <script src="{% static 'js/protection.js' %}"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
